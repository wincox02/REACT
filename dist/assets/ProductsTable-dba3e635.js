import{r as s,u as v,j as e,c as _,_ as C,S as P}from"./index-68470780.js";import{D as w,A as T}from"./Admin-f2a3b927.js";import{h as B}from"./divWithClassName-ab280b7d.js";const k=s.forwardRef(({as:m,bsPrefix:u,variant:o="primary",size:j,active:h=!1,disabled:f=!1,className:a,...r},i)=>{const x=v(u,"btn"),[n,{tagName:l}]=B({tagName:m,disabled:f,...r}),d=l;return e.jsx(d,{...n,...r,ref:i,disabled:f,className:_(a,x,h&&"active",o&&`${x}-${o}`,j&&`${x}-${j}`,r.href&&f&&"disabled")})});k.displayName="Button";const y=k,N=s.forwardRef(({bsPrefix:m,className:u,striped:o,bordered:j,borderless:h,hover:f,size:a,variant:r,responsive:i,...x},n)=>{const l=v(m,"table"),d=_(u,l,r&&`${l}-${r}`,a&&`${l}-${a}`,o&&`${l}-${typeof o=="string"?`striped-${o}`:"striped"}`,j&&`${l}-bordered`,h&&`${l}-borderless`,f&&`${l}-hover`),b=e.jsx("table",{...x,className:d,ref:n});if(i){let g=`${l}-responsive`;return typeof i=="string"&&(g=`${g}-${i}`),e.jsx("div",{className:g,children:b})}return b}),A=N,L=s.lazy(()=>C(()=>import("./DeleteProductModal-edbfb9ef.js"),["assets/DeleteProductModal-edbfb9ef.js","assets/index-68470780.js","assets/index-4e5c0698.css","assets/Modal-be153b84.js","assets/divWithClassName-ab280b7d.js","assets/BootstrapModalManager-a1d1eda3.js","assets/Admin-f2a3b927.js"])),R=s.lazy(()=>C(()=>import("./SaveProductModal-faf1e037.js"),["assets/SaveProductModal-faf1e037.js","assets/index-68470780.js","assets/index-4e5c0698.css","assets/divWithClassName-ab280b7d.js","assets/Modal-be153b84.js","assets/BootstrapModalManager-a1d1eda3.js","assets/Admin-f2a3b927.js"])),I={category:"",description:"",id:0,image:"",price:0,title:""},O=({products:m})=>{const[u,o]=s.useState(null),[j,h]=s.useState(m),[f,a]=s.useState(!1),[r,i]=s.useState(null),[x,n]=s.useState(!1),[l,d]=s.useState(!1),b=s.useCallback(()=>n(!1),[n]),g=s.useCallback(()=>d(!1),[d]),D=s.useCallback(()=>{r&&(n(!1),a(!0),w.delete.product(r.id).then(()=>h(t=>t.filter(c=>c.id!==r.id))).catch(t=>o(t)).finally(()=>a(!1)))},[r,n,h,a]),M=s.useCallback(t=>{r&&(d(!1),a(!0),t.id?w.update.product(t).then(c=>h(p=>p.map($=>$.id===c.id?c:$))).catch(c=>o(c)).finally(()=>a(!1)):(delete t.id,w.create.product(t).then(c=>{h(p=>[...p,c])}).catch(c=>o(c)).finally(()=>a(!1))))},[r,d,h,a]),E=s.useCallback(t=>{i(t),n(!0)},[i,n]),S=s.useCallback(t=>{i(t??I),d(!0)},[i,d]);return u?e.jsx(T,{variant:"danger",children:(u==null?void 0:u.message)||"Something went wrong while fetching products."}):e.jsxs(s.Suspense,{fallback:e.jsx(P,{animation:"border"}),children:[f?e.jsx("div",{style:{alignItems:"center",display:"flex",height:"100vh",justifyContent:"center",width:"100wh"},children:e.jsx(P,{animation:"border"})}):e.jsxs(e.Fragment,{children:[e.jsx(y,{onClick:()=>S(),style:{float:"right",margin:10},variant:"primary",children:"Create Product"}),e.jsxs(A,{striped:!0,bordered:!0,hover:!0,children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"#"}),e.jsx("th",{children:"Title"}),e.jsx("th",{children:"Description"}),e.jsx("th",{children:"Category"}),e.jsx("th",{children:"Price"}),e.jsx("th",{children:"Image"}),e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{children:j.map(t=>e.jsxs("tr",{children:[e.jsx("td",{width:"2%",children:t.id}),e.jsx("td",{width:"23%",children:t.title}),e.jsx("td",{width:"45%",children:t.description}),e.jsx("td",{width:"10%",children:t.category}),e.jsx("td",{width:"5%",children:t.price}),e.jsx("td",{width:"5%",children:e.jsx("img",{alt:t.title,src:t.image,style:{height:30,width:30}})}),e.jsxs("td",{width:"10%",children:[e.jsx(y,{onClick:()=>S(t),variant:"link",children:"Edit"}),e.jsx(y,{onClick:()=>E(t),variant:"link",children:"Delete"})]})]},t.id))})]})]}),e.jsx(L,{onDelete:D,onHide:b,product:r,show:x}),e.jsx(R,{onHide:g,onSave:M,product:r,show:l})]})},F=Object.freeze(Object.defineProperty({__proto__:null,default:O},Symbol.toStringTag,{value:"Module"}));export{y as B,F as P};
